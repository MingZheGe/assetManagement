{"ast":null,"code":"import * as echarts from 'echarts';\nimport { categoryes } from '../types/types'; //只导入特定的属性，变量\nimport dayjs from 'dayjs';\nimport Aside from \"../components/Aside2.vue\";\nimport Topbar from \"../components/Topbar.vue\";\nimport InfoCard from \"../components/InfoCard.vue\";\nimport BillContainer from \"../components/BillContainer.vue\";\nimport { amountToArray } from '../compute/amountFormat';\nimport { sumCount } from '../compute/amountFormat';\nexport default {\n  components: {\n    Aside,\n    Topbar,\n    InfoCard,\n    BillContainer\n  },\n  data() {\n    return {\n      week: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n      income: '',\n      expend: '',\n      myChart: null,\n      // 初始化为null\n      categoryValue: [{\n        name: '餐饮',\n        value: 30,\n        // 假设占比为 30%\n        icon: 'restaurant' // 假设使用名为 \"restaurant\" 的图标\n      }, {\n        name: '购物',\n        value: 20,\n        // 假设占比为 20%\n        icon: 'shopping' // 假设使用名为 \"shopping\" 的图标\n      }\n      // 其他项目\n      ]\n    };\n  },\n\n  computed: {\n    totalExpenses() {\n      const res = this.$store.state.mainStore.recordList.usually.filter(r => r.type === 'expend');\n      return res.reduce((acc, cur) => acc + cur.amount, 0);\n    }\n    /*\r\n    categoryValue() {\r\n      const res = []\r\n      for (const k in categoryes) {\r\n        const amount = this.$store.state.mainStore.recordList.usually.reduce((count, item) => {\r\n          if (item.category === k) count += item.amount\r\n          return count\r\n        }, 0)\r\n        res.push({\r\n          name: categoryes[k].name,\r\n          value: Math.floor((amount / this.totalExpenses) * 100),\r\n          icon: categoryes[k].icon,\r\n        })\r\n      }\r\n      return res\r\n    },\r\n    */\n  },\n\n  methods: {\n    init() {\n      const option = {\n        tooltip: {\n          trigger: 'item'\n        },\n        legend: {\n          top: '5%',\n          left: 'center'\n        },\n        series: [{\n          name: 'Access From',\n          type: 'pie',\n          radius: ['40%', '70%'],\n          avoidLabelOverlap: false,\n          label: {\n            show: false,\n            position: 'center'\n          },\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: 40,\n              fontWeight: 'bold'\n            }\n          },\n          labelLine: {\n            show: false\n          },\n          data: [{\n            value: 1048,\n            name: 'Search Engine'\n          }, {\n            value: 735,\n            name: 'Direct'\n          }, {\n            value: 580,\n            name: 'Email'\n          }, {\n            value: 484,\n            name: 'Union Ads'\n          }, {\n            value: 300,\n            name: 'Video Ads'\n          }]\n        }]\n      };\n      // this.$nextTick(() => {\n      // 在 DOM 渲染完成后初始化 ECharts\n      this.myChart = echarts.init(this.$refs.main);\n      // 其它初始化代码...\n      //})\n      this.myChart.setOption(option);\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};","map":{"version":3,"names":["echarts","categoryes","dayjs","Aside","Topbar","InfoCard","BillContainer","amountToArray","sumCount","components","data","week","income","expend","myChart","categoryValue","name","value","icon","computed","totalExpenses","res","$store","state","mainStore","recordList","usually","filter","r","type","reduce","acc","cur","amount","methods","init","option","tooltip","trigger","legend","top","left","series","radius","avoidLabelOverlap","label","show","position","emphasis","fontSize","fontWeight","labelLine","$refs","main","setOption","mounted"],"sources":["src/views/test.vue"],"sourcesContent":["<template>\r\n  <div class=\"box\">\r\n  <el-aside width=\"200px\" class=\"aside\">\r\n    <Aside :menu-item=\"4\"></Aside>\r\n  </el-aside>\r\n  <el-main>\r\n    <Topbar title=\"统计\" />\r\n    <div class=\"container\">\r\n      <div class=\"flex gap-2 items-end\">\r\n        <div class=\"text-xl color-green\">\r\n          支出\r\n        </div>\r\n        <div>收入</div>\r\n        <div>对比</div>\r\n      </div>\r\n      <div class=\"date flex justify-center\">\r\n        <div class=\"date-item\">5月</div>\r\n        <div class=\"date-item\">6月</div>\r\n        <div class=\"date-item\">7月</div>\r\n        <div class=\"date-item\">8月</div>\r\n        <div class=\"date-item\">9月</div>\r\n        <button class=\"month-select\">月</button>\r\n      </div>\r\n      <div ref=\"main\" class=\"echarts\" style=\"width: 100%; height: 200px;\"></div>\r\n\r\n      <div class=\"expenditure-top\">\r\n        <div class=\"base-title\">\r\n          支出排行\r\n        </div>\r\n        <div class=\"item-container\">\r\n          \r\n          <div v-for=\"(i, idx) in categoryValue\" :key=\"idx\" class=\"item\">\r\n            <div class=\"icon\">\r\n              <svg class=\"icon-font\" aria-hidden=\"true\">\r\n                <use :xlink:href=\"`#icon-${i.icon}`\" />\r\n              </svg>\r\n            </div>\r\n            <div class=\"item-right\">\r\n              <div class=\"base-title\">\r\n                {{ i.name }}&nbsp;&nbsp;{{ i.value }}%\r\n              </div>\r\n              <div class=\"process-bar\">\r\n                <div class=\"bar\" :style=\"{ width: i.value + '%' }\">\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n      \r\n        </div>\r\n      </div>\r\n    </div>\r\n    </el-main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\nimport {categoryes} from '../types/types'//只导入特定的属性，变量\r\nimport dayjs from 'dayjs'\r\nimport Aside from \"../components/Aside2.vue\";\r\nimport Topbar from \"../components/Topbar.vue\";\r\nimport InfoCard from \"../components/InfoCard.vue\";\r\nimport BillContainer from \"../components/BillContainer.vue\";\r\nimport { amountToArray } from '../compute/amountFormat'\r\nimport { sumCount } from '../compute/amountFormat'\r\n\r\nexport default {\r\n  components: {\r\n  Aside,\r\n  Topbar,\r\n  InfoCard,\r\n  BillContainer\r\n},\r\n  data() {\r\n    return {\r\n      week: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n      income: '',\r\n      expend: '',\r\n      myChart: null, // 初始化为null\r\n      categoryValue :[\r\n{\r\n  name: '餐饮',\r\n  value: 30, // 假设占比为 30%\r\n  icon: 'restaurant', // 假设使用名为 \"restaurant\" 的图标\r\n},\r\n{\r\n  name: '购物',\r\n  value: 20, // 假设占比为 20%\r\n  icon: 'shopping', // 假设使用名为 \"shopping\" 的图标\r\n},\r\n// 其他项目\r\n],\r\n    }\r\n  },\r\n  computed: {\r\n    totalExpenses() {\r\n      const res = this.$store.state.mainStore.recordList.usually.filter((r) => r.type === 'expend')\r\n      return res.reduce((acc, cur) => acc + cur.amount, 0)\r\n    },\r\n    /*\r\n    categoryValue() {\r\n      const res = []\r\n      for (const k in categoryes) {\r\n        const amount = this.$store.state.mainStore.recordList.usually.reduce((count, item) => {\r\n          if (item.category === k) count += item.amount\r\n          return count\r\n        }, 0)\r\n        res.push({\r\n          name: categoryes[k].name,\r\n          value: Math.floor((amount / this.totalExpenses) * 100),\r\n          icon: categoryes[k].icon,\r\n        })\r\n      }\r\n      return res\r\n    },\r\n    */\r\n  },\r\n  methods: {\r\n    init() {\r\n     const option = {\r\n  tooltip: {\r\n    trigger: 'item'\r\n  },\r\n  legend: {\r\n    top: '5%',\r\n    left: 'center'\r\n  },\r\n  series: [\r\n    {\r\n      name: 'Access From',\r\n      type: 'pie',\r\n      radius: ['40%', '70%'],\r\n      avoidLabelOverlap: false,\r\n      label: {\r\n        show: false,\r\n        position: 'center'\r\n      },\r\n      emphasis: {\r\n        label: {\r\n          show: true,\r\n          fontSize: 40,\r\n          fontWeight: 'bold'\r\n        }\r\n      },\r\n      labelLine: {\r\n        show: false\r\n      },\r\n      data: [\r\n        { value: 1048, name: 'Search Engine' },\r\n        { value: 735, name: 'Direct' },\r\n        { value: 580, name: 'Email' },\r\n        { value: 484, name: 'Union Ads' },\r\n        { value: 300, name: 'Video Ads' }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n     // this.$nextTick(() => {\r\n      // 在 DOM 渲染完成后初始化 ECharts\r\n      this.myChart = echarts.init(this.$refs.main)\r\n      // 其它初始化代码...\r\n    //})\r\n      this.myChart.setOption(option)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import '../styles/common.less';\r\n\r\n.box{\r\n//background: linear-gradient(30deg,#baebe7, #2a7c76);\r\nbackground: linear-gradient(30deg,#baebe7, #14c4b8);\r\n//background:url(\"../assets/image/sbpk.jpg\");\r\nbackground-size: 100% 15rem;\r\nbackground-repeat: no-repeat;\r\npadding-bottom: 2rem;\r\nbox-sizing: border-box;\r\ndisplay: flex;\r\n}\r\n.container {\r\n  padding: 1rem;\r\n\r\n  .date {\r\n    margin: 1rem 0;\r\n    display: flex;\r\n    font-size: small;\r\n    justify-content: space-evenly;\r\n\r\n    .date-item {\r\n      color: @gray-2;\r\n      padding: .3rem .8rem;\r\n      border-radius: .6rem;\r\n      background-color: rgb(237, 250, 248);\r\n    }\r\n\r\n    .month-select {\r\n      color: @primary-0;\r\n    }\r\n  }\r\n\r\n  .echarts {\r\n    width: 100%;\r\n    height: 200px;\r\n  }\r\n\r\n  .expenditure-top {\r\n    background-color: #fff;\r\n    border-radius: .2rem;\r\n    padding: 1em;\r\n\r\n    .item-container {\r\n      .item {\r\n        display: flex;\r\n        align-items: center;\r\n        padding-bottom: .4rem;\r\n        gap: .5rem;\r\n\r\n        .icon {\r\n          border: .5rem;\r\n          background-color: @primary-8;\r\n          border-radius: .5rem;\r\n        }\r\n\r\n        .item-right {\r\n          flex: 1;\r\n        }\r\n\r\n        .process-bar {\r\n          position: relative;\r\n          width: 100%;\r\n          height: 10px;\r\n          background-color: @primary-3;\r\n          border-radius: 5px;\r\n\r\n          .bar {\r\n            height: 100%;\r\n            div {\r\n              width: 100%;\r\n              height: 100%;\r\n              border-radius: 5px;\r\n              background-color: @primary-1;\r\n              animation: load-bar .5s ease-out;\r\n            }\r\n          }\r\n\r\n          @keyframes load-bar {\r\n            0% {\r\n              width: 0;\r\n            }\r\n\r\n            100% {\r\n              width: 100%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AAyDA,YAAAA,OAAA;AACA,SAAAC,UAAA;AACA,OAAAC,KAAA;AACA,OAAAC,KAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AACA,OAAAC,aAAA;AACA,SAAAC,aAAA;AACA,SAAAC,QAAA;AAEA;EACAC,UAAA;IACAN,KAAA;IACAC,MAAA;IACAC,QAAA;IACAC;EACA;EACAI,KAAA;IACA;MACAC,IAAA;MACAC,MAAA;MACAC,MAAA;MACAC,OAAA;MAAA;MACAC,aAAA,GACA;QACAC,IAAA;QACAC,KAAA;QAAA;QACAC,IAAA;MACA,GACA;QACAF,IAAA;QACAC,KAAA;QAAA;QACAC,IAAA;MACA;MACA;MAAA;IAEA;EACA;;EACAC,QAAA;IACAC,cAAA;MACA,MAAAC,GAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,SAAA,CAAAC,UAAA,CAAAC,OAAA,CAAAC,MAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,IAAA;MACA,OAAAR,GAAA,CAAAS,MAAA,EAAAC,GAAA,EAAAC,GAAA,KAAAD,GAAA,GAAAC,GAAA,CAAAC,MAAA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA;;EACAC,OAAA;IACAC,KAAA;MACA,MAAAC,MAAA;QACAC,OAAA;UACAC,OAAA;QACA;QACAC,MAAA;UACAC,GAAA;UACAC,IAAA;QACA;QACAC,MAAA,GACA;UACA1B,IAAA;UACAa,IAAA;UACAc,MAAA;UACAC,iBAAA;UACAC,KAAA;YACAC,IAAA;YACAC,QAAA;UACA;UACAC,QAAA;YACAH,KAAA;cACAC,IAAA;cACAG,QAAA;cACAC,UAAA;YACA;UACA;UACAC,SAAA;YACAL,IAAA;UACA;UACApC,IAAA,GACA;YAAAO,KAAA;YAAAD,IAAA;UAAA,GACA;YAAAC,KAAA;YAAAD,IAAA;UAAA,GACA;YAAAC,KAAA;YAAAD,IAAA;UAAA,GACA;YAAAC,KAAA;YAAAD,IAAA;UAAA,GACA;YAAAC,KAAA;YAAAD,IAAA;UAAA;QAEA;MAEA;MACA;MACA;MACA,KAAAF,OAAA,GAAAd,OAAA,CAAAmC,IAAA,MAAAiB,KAAA,CAAAC,IAAA;MACA;MACA;MACA,KAAAvC,OAAA,CAAAwC,SAAA,CAAAlB,MAAA;IACA;EACA;EACAmB,QAAA;IACA,KAAApB,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}