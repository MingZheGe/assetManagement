{"ast":null,"code":"// 导出页面为PDF格式\nimport html2Canvas from 'html2canvas';\nimport JsPDF from 'jspdf';\nexport default {\n  install(Vue, options) {\n    Vue.prototype.exportToPdf = function (domId, fileName) {\n      html2Canvas(document.getElementById(domId), {\n        allowTaint: true\n      }).then(function (canvas) {\n        const contentWidth = canvas.width;\n        const contentHeight = canvas.height;\n        const pageHeight = contentWidth / 592.28 * 841.89;\n        let leftHeight = contentHeight;\n        let position = 0;\n        const imgWidth = 595.28;\n        const imgHeight = 592.28 / contentWidth * contentHeight;\n        const pageData = canvas.toDataURL('image/jpeg', 1.0);\n        const PDF = new JsPDF('', 'pt', 'a4');\n        if (leftHeight < pageHeight) {\n          PDF.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight);\n        } else {\n          while (leftHeight > 0) {\n            PDF.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight);\n            leftHeight -= pageHeight;\n            position -= 841.89;\n            if (leftHeight > 0) {\n              PDF.addPage();\n            }\n          }\n        }\n        PDF.save(fileName + '.pdf');\n      });\n    };\n  }\n};","map":{"version":3,"names":["html2Canvas","JsPDF","install","Vue","options","prototype","exportToPdf","domId","fileName","document","getElementById","allowTaint","then","canvas","contentWidth","width","contentHeight","height","pageHeight","leftHeight","position","imgWidth","imgHeight","pageData","toDataURL","PDF","addImage","addPage","save"],"sources":["E:/assetManagement/assetManagement/src/components/utils/htmlToPdf.js"],"sourcesContent":["// 导出页面为PDF格式\r\nimport html2Canvas from 'html2canvas'\r\nimport JsPDF from 'jspdf'\r\nexport default{\r\n  install(Vue, options) {\r\n    Vue.prototype.exportToPdf = function(domId, fileName) {\r\n      html2Canvas(document.getElementById(domId), {\r\n        allowTaint: true\r\n      }).then(function(canvas) {\r\n        const contentWidth = canvas.width\r\n        const contentHeight = canvas.height\r\n        const pageHeight = contentWidth / 592.28 * 841.89\r\n        let leftHeight = contentHeight\r\n        let position = 0\r\n        const imgWidth = 595.28\r\n        const imgHeight = 592.28 / contentWidth * contentHeight\r\n        const pageData = canvas.toDataURL('image/jpeg', 1.0)\r\n        const PDF = new JsPDF('', 'pt', 'a4')\r\n        if (leftHeight < pageHeight) {\r\n          PDF.addImage(pageData, 'JPEG', 0, 0, imgWidth, imgHeight)\r\n        } else {\r\n          while (leftHeight > 0) {\r\n            PDF.addImage(pageData, 'JPEG', 0, position, imgWidth, imgHeight)\r\n            leftHeight -= pageHeight\r\n            position -= 841.89\r\n            if (leftHeight > 0) {\r\n              PDF.addPage()\r\n            }\r\n          }\r\n        }\r\n        PDF.save(fileName + '.pdf')\r\n      }\r\n      )\r\n    }\r\n  }\r\n}"],"mappings":"AAAA;AACA,OAAOA,WAAW,MAAM,aAAa;AACrC,OAAOC,KAAK,MAAM,OAAO;AACzB,eAAc;EACZC,OAAOA,CAACC,GAAG,EAAEC,OAAO,EAAE;IACpBD,GAAG,CAACE,SAAS,CAACC,WAAW,GAAG,UAASC,KAAK,EAAEC,QAAQ,EAAE;MACpDR,WAAW,CAACS,QAAQ,CAACC,cAAc,CAACH,KAAK,CAAC,EAAE;QAC1CI,UAAU,EAAE;MACd,CAAC,CAAC,CAACC,IAAI,CAAC,UAASC,MAAM,EAAE;QACvB,MAAMC,YAAY,GAAGD,MAAM,CAACE,KAAK;QACjC,MAAMC,aAAa,GAAGH,MAAM,CAACI,MAAM;QACnC,MAAMC,UAAU,GAAGJ,YAAY,GAAG,MAAM,GAAG,MAAM;QACjD,IAAIK,UAAU,GAAGH,aAAa;QAC9B,IAAII,QAAQ,GAAG,CAAC;QAChB,MAAMC,QAAQ,GAAG,MAAM;QACvB,MAAMC,SAAS,GAAG,MAAM,GAAGR,YAAY,GAAGE,aAAa;QACvD,MAAMO,QAAQ,GAAGV,MAAM,CAACW,SAAS,CAAC,YAAY,EAAE,GAAG,CAAC;QACpD,MAAMC,GAAG,GAAG,IAAIxB,KAAK,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC;QACrC,IAAIkB,UAAU,GAAGD,UAAU,EAAE;UAC3BO,GAAG,CAACC,QAAQ,CAACH,QAAQ,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAEF,QAAQ,EAAEC,SAAS,CAAC;QAC3D,CAAC,MAAM;UACL,OAAOH,UAAU,GAAG,CAAC,EAAE;YACrBM,GAAG,CAACC,QAAQ,CAACH,QAAQ,EAAE,MAAM,EAAE,CAAC,EAAEH,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC;YAChEH,UAAU,IAAID,UAAU;YACxBE,QAAQ,IAAI,MAAM;YAClB,IAAID,UAAU,GAAG,CAAC,EAAE;cAClBM,GAAG,CAACE,OAAO,EAAE;YACf;UACF;QACF;QACAF,GAAG,CAACG,IAAI,CAACpB,QAAQ,GAAG,MAAM,CAAC;MAC7B,CAAC,CACA;IACH,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}