{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport loading from \"../components/loading\";\nimport axios from \"axios\";\nexport default {\n  components: {\n    loading\n  },\n  data() {\n    var checkEmail = (rule, value, callback) => {\n      var reg = new RegExp(\"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\");\n      if (!value) {\n        return callback(new Error(\"邮箱不能为空\"));\n      }\n      setTimeout(() => {\n        if (!reg.test(value)) {\n          callback(new Error(\"请输入正确的邮箱\"));\n        } else {\n          callback();\n        }\n      }, 1000);\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        if (this.ruleForm.checkPass !== \"\") {\n          this.$refs.ruleForm.validateField(\"checkPass\");\n        }\n        callback();\n      }\n    };\n    return {\n      load: false,\n      ruleForm: {\n        pass: \"\",\n        email: \"\"\n      },\n      rules: {\n        pass: [{\n          validator: '',\n          trigger: \"blur\"\n        }],\n        email: [{\n          validator: '',\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.load = true;\n      this.$refs[formName].validate(valid => {\n        axios.post(\"/login\", {\n          username: this.ruleForm.email,\n          password: this.ruleForm.pass\n        }) //event_id是envent_id\n        .then(response => {\n          if (response.data.message == 'success') this.$router.push('/bill');else {\n            this.$message({\n              message: \"用户名或密码错误\",\n              type: \"danger\"\n            });\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["loading","axios","components","data","checkEmail","rule","value","callback","reg","RegExp","Error","setTimeout","test","validatePass","ruleForm","checkPass","$refs","validateField","load","pass","email","rules","validator","trigger","methods","submitForm","formName","validate","valid","post","username","password","then","response","message","$router","push","$message","type"],"sources":["src/views/login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"logo\">\r\n      <span>V-login</span>\r\n    </div>\r\n    <p>stay foolish,stay hungry</p>\r\n    <div class=\"login-input\">\r\n      <el-form\r\n        :model=\"ruleForm\"\r\n        status-icon\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item label=\"\" prop=\"email\">\r\n          <el-input\r\n            v-model=\"ruleForm.email\"\r\n            clearable\r\n            placeholder=\"邮箱\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"pass\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"ruleForm.pass\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"密码\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">\r\n            <loading v-if=\"load\"></loading>\r\n            <span v-else>登录</span>\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <p class=\"register\">\r\n        <router-link to=\"/register\">还没有账号？注册</router-link>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n <script>\r\nimport loading from \"../components/loading\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  components: { loading },\r\n  data() {\r\n    var checkEmail = (rule, value, callback) => {\r\n      var reg = new RegExp(\r\n        \"^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$\"\r\n      );\r\n      if (!value) {\r\n        return callback(new Error(\"邮箱不能为空\"));\r\n      }\r\n      setTimeout(() => {\r\n        if (!reg.test(value)) {\r\n          callback(new Error(\"请输入正确的邮箱\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      }, 1000);\r\n    };\r\n    var validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else {\r\n        if (this.ruleForm.checkPass !== \"\") {\r\n          this.$refs.ruleForm.validateField(\"checkPass\");\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      load: false,\r\n      ruleForm: {\r\n        pass: \"\",\r\n        email: \"\",\r\n      },\r\n      rules: {\r\n        pass: [{ validator: '', trigger: \"blur\" }],\r\n        email: [{ validator: '', trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.load = true;\r\n      this.$refs[formName].validate((valid) => {\r\n                axios\r\n                  .post(\"/login\", {\r\n                    username:this.ruleForm.email,\r\n                    password:this.ruleForm.pass\r\n                  }) //event_id是envent_id\r\n                  .then((response) => {\r\n                    if(response.data.message == 'success')\r\n                    this.$router.push('/bill')\r\n                  else\r\n                  {\r\n                    this.$message({\r\n                message: \"用户名或密码错误\",\r\n                type: \"danger\",\r\n              });\r\n                  }\r\n\r\n                  });\r\n   \r\n       \r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n \r\n <style lang='scss'>\r\n.login {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgb(48, 49, 62);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  .logo {\r\n    color: rgb(3, 174, 189);\r\n    font-size: 30px;\r\n    // font-style: italic;\r\n    font-weight: bold;\r\n    margin-bottom: 20px;\r\n    img {\r\n      width: 74px;\r\n      vertical-align: middle;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n  .login-input {\r\n    width: 290px;\r\n    padding: 10px;\r\n    margin-top: 10px;\r\n    .el-input {\r\n      // margin-bottom: 20px;\r\n      .el-input__inner {\r\n        border-radius: 30px !important;\r\n        text-align: center;\r\n      }\r\n    }\r\n    .el-button {\r\n      border-radius: 30px !important;\r\n      width: 270px;\r\n      background: rgb(3, 174, 189);\r\n      color: #fff;\r\n      border: 0;\r\n    }\r\n    .register {\r\n      text-align: right;\r\n      margin: 10px;\r\n      a {\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":";AA6CA,OAAAA,OAAA;AACA,OAAAC,KAAA;AACA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA,IAAAC,UAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAC,GAAA,OAAAC,MAAA,CACA,gFACA;MACA,KAAAH,KAAA;QACA,OAAAC,QAAA,KAAAG,KAAA;MACA;MACAC,UAAA;QACA,KAAAH,GAAA,CAAAI,IAAA,CAAAN,KAAA;UACAC,QAAA,KAAAG,KAAA;QACA;UACAH,QAAA;QACA;MACA;IACA;IACA,IAAAM,YAAA,GAAAA,CAAAR,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAG,KAAA;MACA;QACA,SAAAI,QAAA,CAAAC,SAAA;UACA,KAAAC,KAAA,CAAAF,QAAA,CAAAG,aAAA;QACA;QACAV,QAAA;MACA;IACA;IACA;MACAW,IAAA;MACAJ,QAAA;QACAK,IAAA;QACAC,KAAA;MACA;MACAC,KAAA;QACAF,IAAA;UAAAG,SAAA;UAAAC,OAAA;QAAA;QACAH,KAAA;UAAAE,SAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,WAAAC,QAAA;MACA,KAAAR,IAAA;MACA,KAAAF,KAAA,CAAAU,QAAA,EAAAC,QAAA,CAAAC,KAAA;QACA3B,KAAA,CACA4B,IAAA;UACAC,QAAA,OAAAhB,QAAA,CAAAM,KAAA;UACAW,QAAA,OAAAjB,QAAA,CAAAK;QACA;QAAA,CACAa,IAAA,CAAAC,QAAA;UACA,IAAAA,QAAA,CAAA9B,IAAA,CAAA+B,OAAA,eACA,KAAAC,OAAA,CAAAC,IAAA,eAEA;YACA,KAAAC,QAAA;cACAH,OAAA;cACAI,IAAA;YACA;UACA;QAEA;MAGA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}