{"ast":null,"code":"var helperGetDateTime = require('./helperGetDateTime');\nvar helperNewDate = require('./helperNewDate');\nvar toStringDate = require('./toStringDate');\nvar isValidDate = require('./isValidDate');\nvar dateDiffRules = [['yyyy', 31536000000], ['MM', 2592000000], ['dd', 86400000], ['HH', 3600000], ['mm', 60000], ['ss', 1000], ['S', 0]];\n\n/**\r\n  * 返回两个日期之间差距,如果结束日期小于开始日期done为fasle\r\n  *\r\n  * @param {Date} startDate 开始日期\r\n  * @param {Date} endDate 结束日期或当期日期\r\n  * @return {Object}\r\n  */\nfunction getDateDiff(startDate, endDate) {\n  var startTime, endTime, item, diffTime, len, index;\n  var result = {\n    done: false,\n    time: 0\n  };\n  startDate = toStringDate(startDate);\n  endDate = endDate ? toStringDate(endDate) : helperNewDate();\n  if (isValidDate(startDate) && isValidDate(endDate)) {\n    startTime = helperGetDateTime(startDate);\n    endTime = helperGetDateTime(endDate);\n    if (startTime < endTime) {\n      diffTime = result.time = endTime - startTime;\n      result.done = true;\n      for (index = 0, len = dateDiffRules.length; index < len; index++) {\n        item = dateDiffRules[index];\n        if (diffTime >= item[1]) {\n          if (index === len - 1) {\n            result[item[0]] = diffTime || 0;\n          } else {\n            result[item[0]] = Math.floor(diffTime / item[1]);\n            diffTime -= result[item[0]] * item[1];\n          }\n        } else {\n          result[item[0]] = 0;\n        }\n      }\n    }\n  }\n  return result;\n}\nmodule.exports = getDateDiff;","map":{"version":3,"names":["helperGetDateTime","require","helperNewDate","toStringDate","isValidDate","dateDiffRules","getDateDiff","startDate","endDate","startTime","endTime","item","diffTime","len","index","result","done","time","length","Math","floor","module","exports"],"sources":["E:/neuprogram-master2/neuprogram-master/node_modules/xe-utils/getDateDiff.js"],"sourcesContent":["var helperGetDateTime = require('./helperGetDateTime')\r\nvar helperNewDate = require('./helperNewDate')\r\n\r\nvar toStringDate = require('./toStringDate')\r\n\r\nvar isValidDate = require('./isValidDate')\r\n\r\nvar dateDiffRules = [\r\n  ['yyyy', 31536000000],\r\n  ['MM', 2592000000],\r\n  ['dd', 86400000],\r\n  ['HH', 3600000],\r\n  ['mm', 60000],\r\n  ['ss', 1000],\r\n  ['S', 0]\r\n]\r\n\r\n/**\r\n  * 返回两个日期之间差距,如果结束日期小于开始日期done为fasle\r\n  *\r\n  * @param {Date} startDate 开始日期\r\n  * @param {Date} endDate 结束日期或当期日期\r\n  * @return {Object}\r\n  */\r\nfunction getDateDiff (startDate, endDate) {\r\n  var startTime, endTime, item, diffTime, len, index\r\n  var result = { done: false, time: 0 }\r\n  startDate = toStringDate(startDate)\r\n  endDate = endDate ? toStringDate(endDate) : helperNewDate()\r\n  if (isValidDate(startDate) && isValidDate(endDate)) {\r\n    startTime = helperGetDateTime(startDate)\r\n    endTime = helperGetDateTime(endDate)\r\n    if (startTime < endTime) {\r\n      diffTime = result.time = endTime - startTime\r\n      result.done = true\r\n      for (index = 0, len = dateDiffRules.length; index < len; index++) {\r\n        item = dateDiffRules[index]\r\n        if (diffTime >= item[1]) {\r\n          if (index === len - 1) {\r\n            result[item[0]] = diffTime || 0\r\n          } else {\r\n            result[item[0]] = Math.floor(diffTime / item[1])\r\n            diffTime -= result[item[0]] * item[1]\r\n          }\r\n        } else {\r\n          result[item[0]] = 0\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return result\r\n}\r\n\r\nmodule.exports = getDateDiff\r\n"],"mappings":"AAAA,IAAIA,iBAAiB,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AACtD,IAAIC,aAAa,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAE9C,IAAIE,YAAY,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AAE5C,IAAIG,WAAW,GAAGH,OAAO,CAAC,eAAe,CAAC;AAE1C,IAAII,aAAa,GAAG,CAClB,CAAC,MAAM,EAAE,WAAW,CAAC,EACrB,CAAC,IAAI,EAAE,UAAU,CAAC,EAClB,CAAC,IAAI,EAAE,QAAQ,CAAC,EAChB,CAAC,IAAI,EAAE,OAAO,CAAC,EACf,CAAC,IAAI,EAAE,KAAK,CAAC,EACb,CAAC,IAAI,EAAE,IAAI,CAAC,EACZ,CAAC,GAAG,EAAE,CAAC,CAAC,CACT;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,WAAWA,CAAEC,SAAS,EAAEC,OAAO,EAAE;EACxC,IAAIC,SAAS,EAAEC,OAAO,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,KAAK;EAClD,IAAIC,MAAM,GAAG;IAAEC,IAAI,EAAE,KAAK;IAAEC,IAAI,EAAE;EAAE,CAAC;EACrCV,SAAS,GAAGJ,YAAY,CAACI,SAAS,CAAC;EACnCC,OAAO,GAAGA,OAAO,GAAGL,YAAY,CAACK,OAAO,CAAC,GAAGN,aAAa,EAAE;EAC3D,IAAIE,WAAW,CAACG,SAAS,CAAC,IAAIH,WAAW,CAACI,OAAO,CAAC,EAAE;IAClDC,SAAS,GAAGT,iBAAiB,CAACO,SAAS,CAAC;IACxCG,OAAO,GAAGV,iBAAiB,CAACQ,OAAO,CAAC;IACpC,IAAIC,SAAS,GAAGC,OAAO,EAAE;MACvBE,QAAQ,GAAGG,MAAM,CAACE,IAAI,GAAGP,OAAO,GAAGD,SAAS;MAC5CM,MAAM,CAACC,IAAI,GAAG,IAAI;MAClB,KAAKF,KAAK,GAAG,CAAC,EAAED,GAAG,GAAGR,aAAa,CAACa,MAAM,EAAEJ,KAAK,GAAGD,GAAG,EAAEC,KAAK,EAAE,EAAE;QAChEH,IAAI,GAAGN,aAAa,CAACS,KAAK,CAAC;QAC3B,IAAIF,QAAQ,IAAID,IAAI,CAAC,CAAC,CAAC,EAAE;UACvB,IAAIG,KAAK,KAAKD,GAAG,GAAG,CAAC,EAAE;YACrBE,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGC,QAAQ,IAAI,CAAC;UACjC,CAAC,MAAM;YACLG,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGQ,IAAI,CAACC,KAAK,CAACR,QAAQ,GAAGD,IAAI,CAAC,CAAC,CAAC,CAAC;YAChDC,QAAQ,IAAIG,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC;UACvC;QACF,CAAC,MAAM;UACLI,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACrB;MACF;IACF;EACF;EACA,OAAOI,MAAM;AACf;AAEAM,MAAM,CAACC,OAAO,GAAGhB,WAAW"},"metadata":{},"sourceType":"script","externalDependencies":[]}