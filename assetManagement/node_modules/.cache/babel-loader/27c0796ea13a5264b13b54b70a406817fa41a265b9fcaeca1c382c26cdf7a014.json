{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar echarts = require(\"echarts\");\nexport default {\n  props: ['title', 'kdata'],\n  data() {\n    return {\n      charts: null\n    };\n  },\n  mounted() {\n    console.log(\"出现\");\n    // 这里实现的是一个比较简单的，可以按照需求将函数移动到methods函数中\n    var data0 = splitData(this.kdata);\n    console.log(this.kdata); //没传过来\n    // macd计算\n    function splitData(rawData) {\n      var categoryData = [];\n      var values = [];\n      var macds = [];\n      var difs = [];\n      var deas = [];\n      for (var i = 0; i < rawData.length; i++) {\n        categoryData.push(rawData[i].splice(0, 1)[0]);\n        values.push(rawData[i]);\n        macds.push(rawData[i][6]);\n        difs.push(rawData[i][7]);\n        deas.push(rawData[i][8]);\n      }\n      return {\n        categoryData: categoryData,\n        values: values,\n        macds: macds,\n        difs: difs,\n        deas: deas\n      };\n    }\n    // ma均线函数\n    function calculateMA(dayCount) {\n      var result = [];\n      for (var i = 0, len = data0.values.length; i < len; i++) {\n        if (i < dayCount) {\n          result.push(\"-\");\n          continue;\n        }\n        var sum = 0;\n        for (var j = 0; j < dayCount; j++) {\n          sum += data0.values[i - j][1];\n        }\n        result.push(sum / dayCount);\n      }\n      return result;\n    }\n    // k线配置项\n    var option = {\n      tooltip: {\n        trigger: \"axis\",\n        axisPointer: {\n          type: \"cross\"\n        }\n      },\n      grid: [{\n        left: \"3%\",\n        top: \"0\",\n        height: \"70%\"\n      }, {\n        left: \"3%\",\n        right: \"10%\",\n        top: \"75%\",\n        height: \"5%\"\n      }],\n      xAxis: [{\n        type: \"category\",\n        data: data0.categoryData,\n        scale: true,\n        boundaryGap: false,\n        axisLine: {\n          onZero: false,\n          lineStyle: {\n            color: \"red\" //鼠标放上去动的线颜色\n          }\n        },\n\n        splitLine: {\n          show: false\n        },\n        splitNumber: 20\n      }, {\n        type: \"category\",\n        gridIndex: 1,\n        data: data0.categoryData,\n        axisLabel: {\n          show: false\n        }\n      }],\n      yAxis: [{\n        scale: true,\n        splitArea: {\n          show: true\n        },\n        axisLine: {\n          lineStyle: {\n            color: \"red\" //鼠标放上去动的线颜色\n          }\n        },\n\n        position: \"right\"\n      }, {\n        gridIndex: 1,\n        splitNumber: 3,\n        axisLine: {\n          onZero: false\n        },\n        axisTick: {\n          show: false\n        },\n        splitLine: {\n          show: false\n        },\n        axisLabel: {\n          show: true\n        },\n        axisLine: {\n          lineStyle: {\n            color: \"red\"\n          }\n        },\n        position: \"right\"\n      }],\n      dataZoom: [{\n        type: \"inside\",\n        start: 100,\n        end: 80\n      }, {\n        show: true,\n        type: \"slider\",\n        y: \"90%\",\n        start: 50,\n        end: 100\n      }, {\n        show: false,\n        xAxisIndex: [0, 1],\n        type: \"slider\",\n        start: 20,\n        end: 100\n      }],\n      series: [{\n        name: this.title,\n        type: \"candlestick\",\n        data: data0.values,\n        markPoint: {\n          data: [{\n            name: \"XX标点\"\n          }]\n        }\n        /*\r\n        markLine: {\r\n          silent: true,\r\n          data: [\r\n            {\r\n              yAxis: 2222\r\n            }\r\n          ]\r\n        }\r\n        */\n      }\n      /*\r\n      {\r\n        name: \"MA5\",\r\n        type: \"line\",\r\n        data: calculateMA(5),\r\n        smooth: true,\r\n        lineStyle: {\r\n          normal: {\r\n            opacity: 0.5\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: \"MA10\",\r\n        type: \"line\",\r\n        data: calculateMA(10),\r\n        smooth: true,\r\n        lineStyle: {\r\n          normal: {\r\n            opacity: 0.5\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: \"MA20\",\r\n        type: \"line\",\r\n        data: calculateMA(20),\r\n        smooth: true,\r\n        lineStyle: {\r\n          normal: {\r\n            opacity: 0.5\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: \"MA30\",\r\n        type: \"line\",\r\n        data: calculateMA(30),\r\n        smooth: true,\r\n        lineStyle: {\r\n          normal: {\r\n            opacity: 0.5\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: \"MACD\",\r\n        type: \"bar\",\r\n        xAxisIndex: 1,\r\n        yAxisIndex: 1,\r\n        data: data0.macds,\r\n        itemStyle: {\r\n          normal: {\r\n            color: function(params) {\r\n              var colorList;\r\n              if (params.data >= 0) {\r\n                colorList = \"#ef232a\";\r\n              } else {\r\n                colorList = \"#14b143\";\r\n              }\r\n              return colorList;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        name: \"DIF\",\r\n        type: \"line\",\r\n        xAxisIndex: 1,\r\n        yAxisIndex: 1,\r\n        data: data0.difs\r\n      },\r\n      {\r\n        name: \"DEA\",\r\n        type: \"line\",\r\n        xAxisIndex: 1,\r\n        yAxisIndex: 1,\r\n        data: data0.deas\r\n      }\r\n      */]\n    };\n    // 进行初始化\n    this.charts = echarts.init(this.$refs.echartContainer);\n    this.charts.setOption(option);\n  }\n};","map":{"version":3,"names":["echarts","require","props","data","charts","mounted","console","log","data0","splitData","kdata","rawData","categoryData","values","macds","difs","deas","i","length","push","splice","calculateMA","dayCount","result","len","sum","j","option","tooltip","trigger","axisPointer","type","grid","left","top","height","right","xAxis","scale","boundaryGap","axisLine","onZero","lineStyle","color","splitLine","show","splitNumber","gridIndex","axisLabel","yAxis","splitArea","position","axisTick","dataZoom","start","end","y","xAxisIndex","series","name","title","markPoint","init","$refs","echartContainer","setOption"],"sources":["src/components/k.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <h1 align=\"center\">{{ title }}</h1>\r\n      <div id=\"echartContainer\" ref=\"echartContainer\" style=\"width:100%; height:400px\"></div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  var echarts = require(\"echarts\");\r\n  export default {\r\n    props: ['title','kdata'],\r\n    data() {\r\n      return {\r\n        charts: null, \r\n      };\r\n    },\r\n    mounted() {\r\n        console.log(\"出现\");\r\n      // 这里实现的是一个比较简单的，可以按照需求将函数移动到methods函数中\r\n      var data0 = splitData(this.kdata);\r\n      console.log(this.kdata)//没传过来\r\n      // macd计算\r\n      function splitData(rawData) {\r\n        var categoryData = [];\r\n        var values = [];\r\n        var macds = [];\r\n        var difs = [];\r\n        var deas = [];\r\n        for (var i = 0; i < rawData.length; i++) {\r\n          categoryData.push(rawData[i].splice(0, 1)[0]);\r\n          values.push(rawData[i]);\r\n          macds.push(rawData[i][6]);\r\n          difs.push(rawData[i][7]);\r\n          deas.push(rawData[i][8]);\r\n        }\r\n        return {\r\n          categoryData: categoryData,\r\n          values: values,\r\n          macds: macds,\r\n          difs: difs,\r\n          deas: deas\r\n        };\r\n      }\r\n      // ma均线函数\r\n      function calculateMA(dayCount) {\r\n        var result = [];\r\n        for (var i = 0, len = data0.values.length; i < len; i++) {\r\n          if (i < dayCount) {\r\n            result.push(\"-\");\r\n            continue;\r\n          }\r\n          var sum = 0;\r\n          for (var j = 0; j < dayCount; j++) {\r\n            sum += data0.values[i - j][1];\r\n          }\r\n          result.push(sum / dayCount);\r\n        }\r\n        return result;\r\n      }\r\n      // k线配置项\r\n      var option = {\r\n\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"cross\"\r\n          }\r\n        },\r\n        grid: [\r\n          {\r\n            left: \"3%\",\r\n            top: \"0\",\r\n            height: \"70%\"\r\n          },\r\n          \r\n          {\r\n            left: \"3%\",\r\n            right: \"10%\",\r\n            top: \"75%\",\r\n            height: \"5%\"\r\n          }\r\n          \r\n        ],\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: data0.categoryData,\r\n            scale: true,\r\n            boundaryGap: false,\r\n            axisLine: {\r\n              onZero: false,\r\n              lineStyle: {\r\n                color: \"red\"//鼠标放上去动的线颜色\r\n              }\r\n            },\r\n            splitLine: {\r\n              show: false\r\n            },\r\n            splitNumber: 20\r\n          },\r\n          {\r\n            type: \"category\",\r\n            gridIndex: 1,\r\n            data: data0.categoryData,\r\n            axisLabel: { show: false }\r\n          }\r\n        ],\r\n        yAxis: [\r\n          {\r\n            scale: true,\r\n            splitArea: {\r\n              show: true\r\n            },\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"red\"//鼠标放上去动的线颜色\r\n              }\r\n            },\r\n            position: \"right\"\r\n          },\r\n          {\r\n            gridIndex: 1,\r\n            splitNumber: 3,\r\n            axisLine: { onZero: false },\r\n            axisTick: { show: false },\r\n            splitLine: { show: false },\r\n            axisLabel: { show: true },\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"red\"\r\n              }\r\n            },\r\n            position: \"right\"\r\n          }\r\n        ],\r\n        dataZoom: [\r\n          {\r\n            type: \"inside\",\r\n            start: 100,\r\n            end: 80\r\n          },\r\n          {\r\n            show: true,\r\n            type: \"slider\",\r\n            y: \"90%\",\r\n            start: 50,\r\n            end: 100\r\n          },\r\n          {\r\n            show: false,\r\n            xAxisIndex: [0, 1],\r\n            type: \"slider\",\r\n            start: 20,\r\n            end: 100\r\n          }\r\n        ],\r\n        series: [\r\n          {\r\n            name: this.title,\r\n            type: \"candlestick\",\r\n            data: data0.values,\r\n            markPoint: {\r\n              data: [\r\n                {\r\n                  name: \"XX标点\"\r\n                }\r\n              ]\r\n            },\r\n            /*\r\n            markLine: {\r\n              silent: true,\r\n              data: [\r\n                {\r\n                  yAxis: 2222\r\n                }\r\n              ]\r\n            }\r\n            */\r\n          },\r\n          /*\r\n          {\r\n            name: \"MA5\",\r\n            type: \"line\",\r\n            data: calculateMA(5),\r\n            smooth: true,\r\n            lineStyle: {\r\n              normal: {\r\n                opacity: 0.5\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: \"MA10\",\r\n            type: \"line\",\r\n            data: calculateMA(10),\r\n            smooth: true,\r\n            lineStyle: {\r\n              normal: {\r\n                opacity: 0.5\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: \"MA20\",\r\n            type: \"line\",\r\n            data: calculateMA(20),\r\n            smooth: true,\r\n            lineStyle: {\r\n              normal: {\r\n                opacity: 0.5\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: \"MA30\",\r\n            type: \"line\",\r\n            data: calculateMA(30),\r\n            smooth: true,\r\n            lineStyle: {\r\n              normal: {\r\n                opacity: 0.5\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: \"MACD\",\r\n            type: \"bar\",\r\n            xAxisIndex: 1,\r\n            yAxisIndex: 1,\r\n            data: data0.macds,\r\n            itemStyle: {\r\n              normal: {\r\n                color: function(params) {\r\n                  var colorList;\r\n                  if (params.data >= 0) {\r\n                    colorList = \"#ef232a\";\r\n                  } else {\r\n                    colorList = \"#14b143\";\r\n                  }\r\n                  return colorList;\r\n                }\r\n              }\r\n            }\r\n          },\r\n          {\r\n            name: \"DIF\",\r\n            type: \"line\",\r\n            xAxisIndex: 1,\r\n            yAxisIndex: 1,\r\n            data: data0.difs\r\n          },\r\n          {\r\n            name: \"DEA\",\r\n            type: \"line\",\r\n            xAxisIndex: 1,\r\n            yAxisIndex: 1,\r\n            data: data0.deas\r\n          }\r\n          */\r\n        ]\r\n      };\r\n      // 进行初始化\r\n       this.charts = echarts.init(this.$refs.echartContainer);\r\n       this.charts.setOption(option);\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  </style>\r\n  "],"mappings":";AAQA,IAAAA,OAAA,GAAAC,OAAA;AACA;EACAC,KAAA;EACAC,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA;IACA;IACA,IAAAC,KAAA,GAAAC,SAAA,MAAAC,KAAA;IACAJ,OAAA,CAAAC,GAAA,MAAAG,KAAA;IACA;IACA,SAAAD,UAAAE,OAAA;MACA,IAAAC,YAAA;MACA,IAAAC,MAAA;MACA,IAAAC,KAAA;MACA,IAAAC,IAAA;MACA,IAAAC,IAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,GAAAN,OAAA,CAAAO,MAAA,EAAAD,CAAA;QACAL,YAAA,CAAAO,IAAA,CAAAR,OAAA,CAAAM,CAAA,EAAAG,MAAA;QACAP,MAAA,CAAAM,IAAA,CAAAR,OAAA,CAAAM,CAAA;QACAH,KAAA,CAAAK,IAAA,CAAAR,OAAA,CAAAM,CAAA;QACAF,IAAA,CAAAI,IAAA,CAAAR,OAAA,CAAAM,CAAA;QACAD,IAAA,CAAAG,IAAA,CAAAR,OAAA,CAAAM,CAAA;MACA;MACA;QACAL,YAAA,EAAAA,YAAA;QACAC,MAAA,EAAAA,MAAA;QACAC,KAAA,EAAAA,KAAA;QACAC,IAAA,EAAAA,IAAA;QACAC,IAAA,EAAAA;MACA;IACA;IACA;IACA,SAAAK,YAAAC,QAAA;MACA,IAAAC,MAAA;MACA,SAAAN,CAAA,MAAAO,GAAA,GAAAhB,KAAA,CAAAK,MAAA,CAAAK,MAAA,EAAAD,CAAA,GAAAO,GAAA,EAAAP,CAAA;QACA,IAAAA,CAAA,GAAAK,QAAA;UACAC,MAAA,CAAAJ,IAAA;UACA;QACA;QACA,IAAAM,GAAA;QACA,SAAAC,CAAA,MAAAA,CAAA,GAAAJ,QAAA,EAAAI,CAAA;UACAD,GAAA,IAAAjB,KAAA,CAAAK,MAAA,CAAAI,CAAA,GAAAS,CAAA;QACA;QACAH,MAAA,CAAAJ,IAAA,CAAAM,GAAA,GAAAH,QAAA;MACA;MACA,OAAAC,MAAA;IACA;IACA;IACA,IAAAI,MAAA;MAEAC,OAAA;QACAC,OAAA;QACAC,WAAA;UACAC,IAAA;QACA;MACA;MACAC,IAAA,GACA;QACAC,IAAA;QACAC,GAAA;QACAC,MAAA;MACA,GAEA;QACAF,IAAA;QACAG,KAAA;QACAF,GAAA;QACAC,MAAA;MACA,EAEA;MACAE,KAAA,GACA;QACAN,IAAA;QACA5B,IAAA,EAAAK,KAAA,CAAAI,YAAA;QACA0B,KAAA;QACAC,WAAA;QACAC,QAAA;UACAC,MAAA;UACAC,SAAA;YACAC,KAAA;UACA;QACA;;QACAC,SAAA;UACAC,IAAA;QACA;QACAC,WAAA;MACA,GACA;QACAf,IAAA;QACAgB,SAAA;QACA5C,IAAA,EAAAK,KAAA,CAAAI,YAAA;QACAoC,SAAA;UAAAH,IAAA;QAAA;MACA,EACA;MACAI,KAAA,GACA;QACAX,KAAA;QACAY,SAAA;UACAL,IAAA;QACA;QACAL,QAAA;UACAE,SAAA;YACAC,KAAA;UACA;QACA;;QACAQ,QAAA;MACA,GACA;QACAJ,SAAA;QACAD,WAAA;QACAN,QAAA;UAAAC,MAAA;QAAA;QACAW,QAAA;UAAAP,IAAA;QAAA;QACAD,SAAA;UAAAC,IAAA;QAAA;QACAG,SAAA;UAAAH,IAAA;QAAA;QACAL,QAAA;UACAE,SAAA;YACAC,KAAA;UACA;QACA;QACAQ,QAAA;MACA,EACA;MACAE,QAAA,GACA;QACAtB,IAAA;QACAuB,KAAA;QACAC,GAAA;MACA,GACA;QACAV,IAAA;QACAd,IAAA;QACAyB,CAAA;QACAF,KAAA;QACAC,GAAA;MACA,GACA;QACAV,IAAA;QACAY,UAAA;QACA1B,IAAA;QACAuB,KAAA;QACAC,GAAA;MACA,EACA;MACAG,MAAA,GACA;QACAC,IAAA,OAAAC,KAAA;QACA7B,IAAA;QACA5B,IAAA,EAAAK,KAAA,CAAAK,MAAA;QACAgD,SAAA;UACA1D,IAAA,GACA;YACAwD,IAAA;UACA;QAEA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QA/EA;IAiFA;IACA;IACA,KAAAvD,MAAA,GAAAJ,OAAA,CAAA8D,IAAA,MAAAC,KAAA,CAAAC,eAAA;IACA,KAAA5D,MAAA,CAAA6D,SAAA,CAAAtC,MAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}