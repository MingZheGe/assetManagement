<template>
    <div id="app2" >
        <button @click='ClickAddKLine'>添加K线</button>
        <button @click='ClickOrder'>添加沪深A5分钟涨速排名</button>
        <button @click='ClickDelControl'>删除</button>
        <button @click='ClickChangeControl'>切换</button>
        <div ref='divcontainer' style="width:80%;">
            <JSVueContainer ref='jsvuecontainer'/>
        </div>
    </div>
</template>

<script>
import JSVueContainer from '../../jscommon/umychart.vue.components/jsvuecontainer2.0.vue'

export default 
{
    
    data () 
    {
        return {
            Test:''
        }
    },   

    components: { JSVueContainer },

    created:function()
    {
        
    },

    mounted:function()
    {
        var self=this;
        window.onresize = function () { self.OnSize(); }

        //mounted执行完成一个调用 
        this.$nextTick(function () { this.OnSize(); })
    },


    methods:
    {
        OnChangeSymbol:function(symbol)
        {

        },

        OnSize()
        {
            this.$refs.jsvuecontainer.OnSize();
        },

        ClickAddKLine()
        {
            console.log('ClickAddKLine');
            var jsVueContainer=this.$refs.jsvuecontainer;
            var symbol=jsVueContainer.Symbol;
            var minSize=jsVueContainer.MinSize;
            var ID=jsVueContainer.CreateID();
            var self=this;
            jsVueContainer.Control.push( { ClassName:'StockChart', ID:ID,Symbol:symbol, 
                Option:
                    {
                    Type: '历史K线图', 
                    IsShowCorssCursorInfo:false,
                    KLine:
                        {
                            Right:1,                    //复权 0 不复权 1 前复权 2 后复权
                            Period:1,                   //周期 0 日线 1 周线 2 月线 3 年线 
                        }
                    }, 
                Size:{ Width:minSize.Width, Height:minSize.Height },
                CreateComplete:function(jsLoader) { jsVueContainer.OnControlCreateCompete(jsLoader); }
            });
        },

        ClickOrder()
        {
            console.log('ClickOrder');
            var jsVueContainer=this.$refs.jsvuecontainer;
            var minSize=jsVueContainer.MinSize;
            var ID=jsVueContainer.CreateID();
            jsVueContainer.Control.push( { ClassName:'StockOrder', ID:ID,Symbol:"CNA.ci", Option: { OrderFiled:39, Order:-1 } , 
                Size:{ Width:minSize.Width, Height:minSize.Height },
                CreateComplete:function(jsLoader) { jsVueContainer.OnControlCreateCompete(jsLoader); }
            });
        },

        ClickDelControl()
        {
            console.log('ClickDelControl');
            this.$refs.jsvuecontainer.Control.splice(1,1);
        },

        ClickChangeControl()
        {
            console.log('ClickChangeControl');
            
            var jsVueContainer=this.$refs.jsvuecontainer;
            var symbol=jsVueContainer.Symbol;
            var minSize=jsVueContainer.MinSize;
            var ID=jsVueContainer.CreateID();
            //jsVueContainer.Control.splice(1,1);
            jsVueContainer.Control.splice(1,1,{ClassName:'StockChart',ID:ID, Symbol:'600000.sh',Size:{ Width:minSize.Width, Height:minSize.Height }});
            //this.$set(jsVueContainer.Control, 1, {ClassName:'StockChart',Symbol:'600000.sh',Size:{ Width:minSize.Width, Height:minSize.Height }});
        }
        
    }
}

</script>

<style>

  
</style>
