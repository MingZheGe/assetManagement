<template>
    <div class='divstockfull'>
        <StockFull ref='stockfull' DefaultPeriod='' :KlineType="1" :DefaultSymbol="Symbol" 
            :KLineOption="KLineOption" :MinuteOption="MinuteOption" />
    </div>
</template>

<script>
import StockFull from '../components/stockfull.vue'
import HQChart from '../../../jscommon/umychart.vue/umychart.vue'

//定制K线设置
const CUSTOM_KLINE_OPTION=
{
    Windows: //窗口指标
    [
        {Index:"MA"},
        {Index:"MACD"},
    ], 

    //TradeIndex: {Index:'交易系统-BIAS'},    //交易系统
    //ColorIndex:{ Index:'五彩K线-十字星'},     //五彩K线

    KLine:
    {
        //Info:["公告","互动易","调研"],              //信息地雷
        Right:0,                                   //复权 0 不复权 1 前复权 2 后复权
    }
}

const CUSTOM_MINUTE_OPTION=
{
    Windows: //窗口指标
    [
        {Index:"RSI"},
    ]
}

export default 
{
    props: ['Symbol'],
    data () 
    {
        return {
          KLineOption:CUSTOM_KLINE_OPTION,
          MinuteOption:CUSTOM_MINUTE_OPTION
        }
    },   

    components: { StockFull},

    created:function()
    {
        var isLog=this.GetURLParams('log');
        if (isLog=='false') 
        {
            HQChart.JSConsole.Chart.Log=()=>{}
            HQChart.JSConsole.Complier.Log=()=>{}
        }
    },

    mounted:function()
    {
        var stockfull=this.$refs.stockfull;

        var self=this;
        window.onresize = function() { self.OnSize() }

        this.OnSize();
    },


    methods:
    {
        OnChangeSymbol:function(symbol)
        {
            this.$refs.stockfull.SetSymbol(symbol);
        },
        
        OnSize:function()
        {
            var height= $(window).height();
            var width = $(window).width();

            $('.divstockfull').height(height);

            this.$refs.stockfull.OnSize();
        },

        GetURLParams:function(name) 
        {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]);
            return null;
        }
    }
}

</script>

<style>
.divstockfull
{
    height:800px;
}
  
</style>
